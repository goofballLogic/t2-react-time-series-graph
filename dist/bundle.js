!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"),require("recharts"));else if("function"==typeof define&&define.amd)define(["react","recharts"],t);else{var n="object"==typeof exports?t(require("react"),require("recharts")):t(e.react,e.recharts);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),u=(r=a)&&r.__esModule?r:{default:r};t.default=function(e){var t=e.color;return u.default.createElement("span",{className:"swatch",style:{backgroundColor:"rgb("+t+")"}},"Â ")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),u=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.payload,n=e.series,l=e.formatTooltipDate,i=t&&t[0]&&t[0].payload;if(!i)return null;var c=i.dateWhen,o=i.runningTotals;return a.default.createElement("div",{className:"tooltip"},a.default.createElement("p",{className:"when"},(l||function(e){return new Date(e).toLocaleDateString()})(c)),n.map(function(e){return r({},e,{total:o[e.id]||0})}).sort(function(e,t){return e.total>t.total?-1:e.total<t.total?1:0}).map(function(e){return a.default.createElement("p",{className:"scores",key:e.id},a.default.createElement("span",{className:"score-name"},a.default.createElement(u.default,e),e.name),a.default.createElement("span",{className:"score-score"},e.total))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e,t,n){var a=e[t]||[];return a.push(n),r({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,a))}t.default=function(e,t){var n=t=r({whenKey:"when",valueKey:"score",idKey:"id"},t),i=n.whenKey,c=n.valueKey,o=n.idKey,s=e.reduce(function(e,t){return a(e,t[i],t)},{}),f={};return Object.keys(s).sort().map(function(e){return l(u({when:new Date(e).valueOf(),dateWhen:new Date(e),events:s[e]},o,c),f)})};var u=function(e,t,n){return r({},e,{points:e.events.reduce(function(e,r){return a(e,r[t],r[n])},{})})},l=function(e,t){var n=e.points,a=!0,u=!1,l=void 0;try{for(var i,c=Object.keys(n)[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var o=i.value,s=n[o].reduce(function(e,t){return e+t},0),f=t[o]||0;t[o]=f+s}}catch(e){u=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw l}}return r({},e,{runningTotals:r({},t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),u=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(){};t.default=function(e){var t=e.events,n=e.series,l=e.formatTableDate,c=e.selectEvent;return t?function(e){var t=e.events,n=e.series,l=e.formatTableDate;e.selectWhen;return a.default.createElement("table",null,a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",null,"When"),a.default.createElement("th",null,"Name"),a.default.createElement("th",null,"Score"),a.default.createElement("th",null,"Description"))),a.default.createElement("tbody",null,t.map(function(e){return r({},e,{s:n.find(function(t){return t.id===e.id})})}).filter(function(e){return e.s}).map(function(e){return a.default.createElement("tr",{key:e.key},a.default.createElement("td",null,l(new Date(e.when))),a.default.createElement("td",null,a.default.createElement(u.default,e.s),e.s.name),a.default.createElement("td",{className:e.score<0?"down":e.score>0?"up":""},e.score),a.default.createElement("td",null,e.description))})))}({events:t.slice(0).sort(function(e,t){return e.when>t.when?-1:e.when<t.when?1:0}).map(function(e,t){return r({},e,{key:e.key||t})}),series:n,formatTableDate:l=l||defaultFormatTableDate,selectEvent:c=c||i}):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e,t,n){for(var r=0,a=[],u=0,l=[],i=0;i<e.length;i++)t(e[i])?(r++,a=a.concat(n(e[i])),r>=u&&(u=r,l=a.slice(0))):(r=0,a=[]);return{max:u,included:l}}function u(e,t,n,r){for(var a=0,u=0,l=0,i=[],c=0,o=[],s=0;s<e.length;s++){var f=t(e[s]);f<u||!n&&(void 0===f||f===u)?(u=f||u,a=f||u,l=0,i=[]):(l=(u=f)-a,i=i.concat(r(e[s])),l>=c&&(c=l,o=i.slice(0)))}return{max:c,included:o}}t.consecutiveUpStreaks=function(e,t){var n=e.map(function(e){return{id:e.id,series:e,streak:a(t,function(t){return t.points[e.id]>0},function(t){return t.events.filter(function(t){return t.id===e.id})})}});return i(l(n))},t.sequentialUpStreaks=function(e,t){var n=e.map(function(e){return{id:e.id,series:e,streak:a(t.filter(function(t){return e.id in t.points}),function(t){return t.points[e.id]>=0},function(t){return t.events.filter(function(t){return t.id===e.id})})}});return i(l(n))},t.consecutiveUpStreakSums=function(e,t){var n=e.map(function(e){return{id:e.id,series:e,streak:u(t,function(t){return t.runningTotals[e.id]},!1,function(t){return t.events.filter(function(t){return t.id===e.id})})}});return i(l(n))},t.sequentialUpStreakSums=function(e,t){var n=e.map(function(e){return{id:e.id,series:e,streak:u(t,function(t){return t.runningTotals[e.id]},!0,function(t){return t.events.filter(function(t){return t.id===e.id})})}});return i(l(n))};var l=function(e){return e.slice(0).sort(function(e,t){return t.streak.max-e.streak.max})},i=function(e){var t=Math.max.apply(Math,e.map(function(e){return e.streak.max}));return e.map(function(e){return r({},e,{percentage:0===e.streak.max?0:100*e.streak.max/t})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consecutiveUpStreakSums=t.sequentialUpStreakSums=t.consecutiveUpStreaks=t.sequentialUpStreaks=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=i(n(0)),u=i(n(1)),l=n(5);function i(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.series,n=e.data,r=e.strategy;return a.default.createElement("table",null,a.default.createElement("tbody",null,r(t,n).map(function(e){return a.default.createElement("tr",{key:e.id},a.default.createElement("td",{className:"name"},a.default.createElement(u.default,e.series),e.series.name),a.default.createElement("td",{className:"visual-sizer"},a.default.createElement("span",{className:"up",style:{width:e.percentage+"%"}})),a.default.createElement("td",{className:"length"},e.streak.max))})))},o=t.sequentialUpStreaks=function(e){return c(r({},e,{strategy:l.sequentialUpStreaks}))};t.consecutiveUpStreaks=function(e){return c(r({},e,{strategy:l.consecutiveUpStreaks}))},t.sequentialUpStreakSums=function(e){return c(r({},e,{strategy:l.sequentialUpStreakSums}))},t.consecutiveUpStreakSums=function(e){return c(r({},e,{strategy:l.consecutiveUpStreakSums}))};t.default=function(e){return a.default.createElement("section",{className:"streaks"},(e.strategy||o)(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),u=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return new Date(e).toLocaleDateString()},c=function(){};t.default=function(e){var t=e.data,n=e.series,l=e.formatTableDate,o=e.selectWhen;return function(e){var t=e.data,n=e.series,l=e.formatTableDate,i=e.selectWhen;return a.default.createElement("table",null,a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",null,"When"),n.map(function(e){return a.default.createElement("th",{key:e.id},a.default.createElement(u.default,e),e.name)}))),a.default.createElement("tbody",null,t.map(function(e){return[a.default.createElement("tr",{key:e.when,onClick:i.bind(void 0,e.when),className:"master "+(e.selected?"selected":"")},a.default.createElement("td",{rowSpan:"2"},l(e.when)),n.map(function(t){return a.default.createElement("td",{key:t.id,className:"total "+(n=t.id,r=e,n in r.points?"significant "+(u=r.points[n],(l=u.reduce(function(e,t){return e+t}))>0?"up":l<0?"down":""):"")},e.runningTotals[t.id]);var n,r,u,l})),a.default.createElement("tr",{key:"detail-"+e.when,className:"detail "+(e.selected?"selected":"")},a.default.createElement("td",{colSpan:n.length},a.default.createElement("div",null,a.default.createElement("table",null,a.default.createElement("tbody",null,e.events.map(function(e){return r({s:n.find(function(t){return t.id===e.id})},e)}).filter(function(e){return e.s}).map(function(e,t){return a.default.createElement("tr",{key:t},a.default.createElement("td",null,a.default.createElement(u.default,e.s),e.s.name),a.default.createElement("td",{className:e.score<0?"down":e.score>0?"up":""},e.score),a.default.createElement("td",null,e.description))}))))))]})))}({data:t.slice(0).sort(function(e,t){return e.when>t.when?-1:e.when<t.when?1:0}),series:n,formatTableDate:l=l||i,selectWhen:o=o||c})}},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(0)),a=l(n(2)),u=n(8);function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return new Date(e).toLocaleDateString()};function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var r=!0,a=!1,u=void 0;try{for(var l,i=t[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var c=l.value;e[c]=e[c]||n[c]||[0]}}catch(e){a=!0,u=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw u}}}}t.default=function(e){var t=e.formatTickDate,n=e.data,l=e.series,o=e.endRagged,s=e.startRagged,f=e.minTickGap,d=void 0===f?20:f;if(!n)throw new Error("Missing property: data");if(!l)throw new Error("Missing property: series");if(!n.length)return r.default.createElement("div",null,"No data");if(!l.length)return r.default.createElement("div",null,"No series");var m=JSON.parse(JSON.stringify(n));return function(e,t,n,r){if(!r){var a=t.slice(-1)[0]||{};c(a.runningTotals,e),c(a.points,e,a.runningTotals)}if(!n){var u=t[0];c(u.runningTotals,e),c(u.points,e)}}(l.map(function(e){return e.id}),m,s,o),r.default.createElement(u.ResponsiveContainer,{height:400},r.default.createElement(u.LineChart,{data:m,margin:{right:100}},r.default.createElement(u.CartesianGrid,{strokeDasharray:"3 3"}),l.map(function(e){return r.default.createElement(u.Line,{connectNulls:!0,dataKey:function(t){return e.id in t.points?t.runningTotals[e.id]:null},key:e.id,stroke:"rgb("+e.color+")",type:"linear",name:e.name})}),r.default.createElement(u.Legend,null),r.default.createElement(u.Tooltip,{content:r.default.createElement(a.default,e),active:!0}),r.default.createElement(u.XAxis,{dataKey:"when",tickFormatter:t||i,type:"number",domain:["dataMin","dataMax"],tickCount:999,minTickGap:d}),r.default.createElement(u.YAxis,{type:"number",domain:["dataMin - 2","dataMax + 2"],tickCount:10}),r.default.createElement(u.ReferenceLine,{y:0,stroke:"black"})))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consecutiveUpStreakSums=t.sequentialUpStreakSums=t.consecutiveUpStreaks=t.accumulate=t.TimeSeriesEventTable=t.TimeSeriesStreaks=t.TimeSeriesTable=t.TimeSeriesTooltip=t.TimeSeriesGraph=void 0;var r=s(n(9)),a=s(n(2)),u=s(n(7)),l=n(6),i=s(l),c=s(n(4)),o=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}t.default=r.default,t.TimeSeriesGraph=r.default,t.TimeSeriesTooltip=a.default,t.TimeSeriesTable=u.default,t.TimeSeriesStreaks=i.default,t.TimeSeriesEventTable=c.default,t.accumulate=o.default,t.consecutiveUpStreaks=l.consecutiveUpStreaks,t.sequentialUpStreakSums=l.sequentialUpStreakSums,t.consecutiveUpStreakSums=l.consecutiveUpStreakSums}])});