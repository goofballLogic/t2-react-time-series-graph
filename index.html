---
layout: default
title: Home
---

<nav>
    <a href="#sample-code">Sample code</a>
    <a href="#live-example">Live example</a>
</nav>
<h1 id="intro">What does a graph look like?</h1>

This one has some custom CSS applied to it:
<img src="sample.png" />

<style>

    #live-example, table, tr, td, th {

        font-size: 8pt;

    }
    #live-example .tooltip {

        background-color: rgba( 255, 255, 255, 0.9 );
        box-shadow: 3px 3px 1px 1px silver;
        padding: 10px;
        min-width: 150px;
        text-align: center;
        border: solid 1px black;

    }
    #live-example .tooltip p {

        margin: 0;
        font-size: 1.2em;
        line-height: 1.5;

    }
    #live-example .tooltip .when {

        background-color: black;
        color: white;
        padding: 10px;
        margin: -10px -10px 5px -10px;

    }
    #live-example .tooltip .scores {

        display: flex;
        white-space: nowrap;

    }
    #live-example .tooltip .scores .score-name,
    #live-example .tooltip .scores .score-score {

        flex: 1;
        text-align: left;

    }
    #live-example .tooltip .scores .score-score {

        text-align: right;

    }
    #live-example path {

        stroke-width: 4;
        stroke-opacity: 0.5;

    }

    #live-example .data-editor {

        display: flex;

    }
    #live-example .data-editor > div {

        flex: 1;

    }
    #live-example .data-editor > div + div {

        margin-left: 10px;

    }
    #live-example .editor {

        padding: 20px;
        background-color: #FAFAFA;
        
    }
    #live-example textarea {

        min-height: 300px;
        width: 100%;
        font-family: monospace;
        border: none;
        background-color: transparent;

    }
    #live-example .plot-data, .main-content #live-example .plot-data {

        max-height: 500px;
        overflow: auto;
        background-color: #FAFAFA;
        padding: 20px;
        margin-right: 100px;
        font-size: 8pt;
        border: none;

    }
    #live-example .swatch {

        width: 1em;
        height: 1em;
        display: inline-block;
        margin-right: 0.5em;

    }
    #live-example tr.master:hover {

        background-color: #F7F7F7;

    }
    #live-example tr.detail > td {

        display: none

    }
    #live-example tr.detail.selected > td {

        display: table-cell;

    }
    #live-example tr.detail div {

        transition: all 0s;
        max-height: 0;
        overflow: hidden;
        opacity: 0;

    } 
    #live-example tr.detail.selected div {

        transition: all 0.5s;
        max-height: 300px;
        opacity: 1;

    }
    code, .main-content code {

        font-size: 8pt;
        background-color: #F7F7F7;
        padding: 20px;
        display: block;
        white-space: pre;

    }
    aside, .main-content aside {

        font-style: italic;
        margin-bottom: 1em;

    }

</style>
<h1>Sample code</h1>
<article id="sample-code">

    <p>At a minimum you need to supply two bits of data to render the graph:</p>
    <h3>1. Series</h3>
    <p>The series is an array of objects - one per line on the graph. Here's an example with two series (Imran in red, Gareth in blue):</p>
    <code>const series = [
    { "name": "Imran", "id": "imr", "color": "255,0,0" },
    { "name": "Gareth", "id": "gar", "color": "0,0,103" }
];</code>
    <p>The id property is important because it's what you use to identify an event for that series.</p>
    <h3>2. Data (calculated from a list of events)</h3>
    <p>A list of events is the raw information which will be processed to produce the data points for the plot. There can be multiple events on a given date, even for a single series. There also may be no events for a specific event on a given date.</p>
    <aside> Note that in this example below there are events against a series id which doesn't exist in the series supplied ("nia") so this data will not be plotted on the graph.</aside>
    <code>const events = [
    { "id": "imr", "when": "2017-11-10", "score": 4 },
    { "id": "gar", "when": "2017-11-24", "score": 4 },
    { "id": "nia", "when": "2017-10-20", "score": 2 },
    { "id": "imr", "when": "2017-11-10", "score": -3 },
    { "id": "gar", "when": "2017-11-10", "score": 1 }
];</code>
    <p>This list of events must be aggregated and sorted into order to produce the data points for the plot. An "accumulate" function is provided to do this for you. For example, the list of events above would be accumulated to produce:</p>
    <code>const data = accumulate( events );
console.log( data );

[
    {
        "when": 1508457600000,
        "dateWhen": "2017-10-20T00:00:00.000Z",
        "events": [ 
            { "id": "nia", "when": "2017-10-20", "score": 2 } 
        ],
        "points": { "nia": [ 2 ] },
        "runningTotals": { "nia": 2 }
    },
    {
        "when": 1510272000000,
        "dateWhen": "2017-11-10T00:00:00.000Z",
        "events": [
            { "id": "imr", "when": "2017-11-10", "score": 4 },
            { "id": "imr", "when": "2017-11-10", "score": -3 },
            { "id": "gar", "when": "2017-11-10", "score": 1 }
        ],
        "points": { "imr": [ 4, -3 ], "gar": [ 1 ] },
        "runningTotals": { "nia": 2, "imr": 1, "gar": 1 }
    },
    {
        "when": 1511481600000,
        "dateWhen": "2017-11-24T00:00:00.000Z",
        "events": [
            { "id": "gar", "when": "2017-11-24", "score": 4 }
        ],
        "points": { "gar": [ 4 ] },
        "runningTotals": { "nia": 2, "imr": 1, "gar": 5 }
    }
]</code>    
    <p>Our sample dataset produces a very simple graph like this:</p>
    <code>&lt;TimeSeriesGraph data={data} series={series} /&gt;</code>
    <img src="simple.png" />
</article>
<h1>Live example</h1>
<article id="live-example">
</article>

<script src="./live-example.js"></script>
<script src="./main.js"></script>